Object.defineProperty(exports,"__esModule",{value:true});var _jsxFileName='src/containers/alert/index.js';var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactNative=require('react-native');var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _config=require('../../config');var _config2=_interopRequireDefault(_config);var _style=require('./style');var _style2=_interopRequireDefault(_style);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var HwBackHandler=_reactNative.BackHandler||_reactNative.BackAndroid;var HW_BACK_EVENT='hardwareBackPress';var Alert=function(_Component){_inherits(Alert,_Component);function Alert(props){_classCallCheck(this,Alert);var _this=_possibleConstructorReturn(this,(Alert.__proto__||Object.getPrototypeOf(Alert)).call(this,props));_this._springShow=function(fromConstructor){_this._toggleAlert(fromConstructor);_reactNative.Animated.spring(_this.springValue,{toValue:1,bounciness:10}).start();};_this._springHide=function(){if(_this.state.showSelf===true){_reactNative.Animated.spring(_this.springValue,{toValue:0,tension:10}).start();setTimeout(function(){_this._toggleAlert();_this._onDismiss();},70);}};_this._toggleAlert=function(fromConstructor){if(fromConstructor)_this.state={showSelf:true};else _this.setState({showSelf:!_this.state.showSelf});};_this._handleHwBackEvent=function(){if(_this.state.showSelf){_this._springHide();return true;}return false;};_this._onTapOutside=function(){var closeOnTouchOutside=_this.props.closeOnTouchOutside;if(closeOnTouchOutside)_this._springHide();};_this._onDismiss=function(){var onDismiss=_this.props.onDismiss;onDismiss&&onDismiss();};_this._renderButton=function(data){var text=data.text,backgroundColor=data.backgroundColor,buttonStyle=data.buttonStyle,buttonTextStyle=data.buttonTextStyle,onPress=data.onPress;return _react2.default.createElement(_reactNative.TouchableOpacity,{onPress:onPress,__source:{fileName:_jsxFileName,lineNumber:95}},_react2.default.createElement(_reactNative.View,{style:[_style2.default.button,{backgroundColor:backgroundColor},buttonStyle],__source:{fileName:_jsxFileName,lineNumber:96}},_react2.default.createElement(_reactNative.Text,{style:[_style2.default.buttonText,buttonTextStyle],__source:{fileName:_jsxFileName,lineNumber:97}},text)));};_this._renderAlert=function(){var animation={transform:[{scale:_this.springValue}]};var showProgress=_this.props.showProgress;var _this$props=_this.props,title=_this$props.title,message=_this$props.message;var _this$props2=_this.props,showCancelButton=_this$props2.showCancelButton,cancelText=_this$props2.cancelText,cancelButtonColor=_this$props2.cancelButtonColor,cancelButtonStyle=_this$props2.cancelButtonStyle,cancelButtonTextStyle=_this$props2.cancelButtonTextStyle,onCancelPressed=_this$props2.onCancelPressed;var _this$props3=_this.props,showConfirmButton=_this$props3.showConfirmButton,confirmText=_this$props3.confirmText,confirmButtonColor=_this$props3.confirmButtonColor,confirmButtonStyle=_this$props3.confirmButtonStyle,confirmButtonTextStyle=_this$props3.confirmButtonTextStyle,onConfirmPressed=_this$props3.onConfirmPressed;var _this$props4=_this.props,alertContainerStyle=_this$props4.alertContainerStyle,overlayStyle=_this$props4.overlayStyle,progressSize=_this$props4.progressSize,progressColor=_this$props4.progressColor,contentContainerStyle=_this$props4.contentContainerStyle,titleStyle=_this$props4.titleStyle,messageStyle=_this$props4.messageStyle;var cancelButtonData={text:cancelText,backgroundColor:cancelButtonColor,buttonStyle:cancelButtonStyle,buttonTextStyle:cancelButtonTextStyle,onPress:onCancelPressed};var confirmButtonData={text:confirmText,backgroundColor:confirmButtonColor,buttonStyle:confirmButtonStyle,buttonTextStyle:confirmButtonTextStyle,onPress:onConfirmPressed};return _react2.default.createElement(_reactNative.View,{style:[_style2.default.container,alertContainerStyle],__source:{fileName:_jsxFileName,lineNumber:134}},_react2.default.createElement(_reactNative.TouchableWithoutFeedback,{onPress:_this._onTapOutside,__source:{fileName:_jsxFileName,lineNumber:135}},_react2.default.createElement(_reactNative.View,{style:[_style2.default.overlay,overlayStyle],__source:{fileName:_jsxFileName,lineNumber:136}})),_react2.default.createElement(_reactNative.Animated.View,{style:[_style2.default.contentContainer,animation,contentContainerStyle],__source:{fileName:_jsxFileName,lineNumber:138}},_react2.default.createElement(_reactNative.View,{style:_style2.default.content,__source:{fileName:_jsxFileName,lineNumber:139}},showProgress?_react2.default.createElement(_reactNative.ActivityIndicator,{size:progressSize,color:progressColor,__source:{fileName:_jsxFileName,lineNumber:140}}):null,title?_react2.default.createElement(_reactNative.Text,{style:[_style2.default.title,titleStyle],__source:{fileName:_jsxFileName,lineNumber:141}},title):null,message?_react2.default.createElement(_reactNative.Text,{style:[_style2.default.message,messageStyle],__source:{fileName:_jsxFileName,lineNumber:142}},message):null),_react2.default.createElement(_reactNative.View,{style:_style2.default.action,__source:{fileName:_jsxFileName,lineNumber:144}},showCancelButton?_this._renderButton(cancelButtonData):null,showConfirmButton?_this._renderButton(confirmButtonData):null),_this.props.children));};var show=_this.props.show;_this.springValue=new _reactNative.Animated.Value(0.3);_this.state={showSelf:false};if(show)_this._springShow(true);return _this;}_createClass(Alert,[{key:'componentDidMount',value:function componentDidMount(){HwBackHandler.addEventListener(HW_BACK_EVENT,this._handleHwBackEvent);}},{key:'render',value:function render(){var showSelf=this.state.showSelf;if(showSelf)return this._renderAlert();return null;}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){var show=nextProps.show;var showSelf=this.state.showSelf;if(show&&!showSelf)this._springShow();else if(show===false&&showSelf)this._springHide();}},{key:'componentWillUnmount',value:function componentWillUnmount(){HwBackHandler.removeEventListener(HW_BACK_EVENT);}}]);return Alert;}(_react.Component);exports.default=Alert;;Alert.propTypes={show:_propTypes2.default.bool,showProgress:_propTypes2.default.bool,title:_propTypes2.default.string,message:_propTypes2.default.string,closeOnTouchOutside:_propTypes2.default.bool,closeOnHardwareBackPress:_propTypes2.default.bool,showCancelButton:_propTypes2.default.bool,showConfirmButton:_propTypes2.default.bool,cancelText:_propTypes2.default.string,confirmText:_propTypes2.default.string,cancelButtonColor:_propTypes2.default.string,confirmButtonColor:_propTypes2.default.string,onCancelPressed:_propTypes2.default.func,onConfirmPressed:_propTypes2.default.func};Alert.defaultProps={show:false,showProgress:false,closeOnTouchOutside:true,closeOnHardwareBackPress:true,showCancelButton:false,showConfirmButton:false,cancelText:_config2.default.alert.cancelText,confirmText:_config2.default.alert.confirmText,cancelButtonColor:_config2.default.colors.cancel,confirmButtonColor:_config2.default.colors.confirm};